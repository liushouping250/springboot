package com.example.demo.aop;import org.apache.ibatis.plugin.Interceptor;import org.apache.ibatis.session.SqlSessionFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Configuration;import javax.annotation.PostConstruct;import java.util.List;/** * @description: mybatis 配置 * @author: Mr.monster.liu * @create: 2021-05-28 11:58 **/@Configurationpublic class MybatisExtConfigure {    @Autowired    private List<SqlSessionFactory> sqlSessionFactoryList;    @PostConstruct    public void addInterceptor() {        MybatisNullInterceptor interceptor = new MybatisNullInterceptor();        for (SqlSessionFactory sqlSessionFactory : sqlSessionFactoryList) {            org.apache.ibatis.session.Configuration configuration = sqlSessionFactory.getConfiguration();            if (!containsInterceptor(configuration, interceptor)) {                configuration.addInterceptor(interceptor);            }        }    }    private boolean containsInterceptor(org.apache.ibatis.session.Configuration configuration, Interceptor interceptor) {        try {            return configuration.getInterceptors().contains(interceptor);        } catch (Exception e) {            return false;        }    }}